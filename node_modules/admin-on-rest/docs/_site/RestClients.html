<!DOCTYPE HTML>
<html lang="en-US">
    <head>
        <title>Admin-on-rest - REST Clients</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/syntax.css">
    </head>
    <body>
        <div class="book with-summary font-size-2 font-family-1">
            <div class="book-summary">
                <nav role="navigation">
                    <ul class="summary">
                        <li class="header">Table of Contents</li>
                        <li class="chapter ">
                            <a href="./index.html">
                                <b>1.</b> Read Me
                            </a>
                        </li>
                        <li class="chapter ">
                            <a href="./Tutorial.html">
                                <b>2.</b> Tutorial
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#installation">Installation</a>
                                </li>
                                <li class="chapter">
                                    <a href="#making-contact-with-the-api">Making Contact With The API</a>
                                </li>
                                <li class="chapter">
                                    <a href="#field-types">Field Types</a>
                                </li>
                                <li class="chapter">
                                    <a href="#relationships">Relationships</a>
                                </li>
                                <li class="chapter">
                                    <a href="#creation-and-edition">Creation and Edition</a>
                                </li>
                                <li class="chapter">
                                    <a href="#deletion">Deletion</a>
                                </li>
                                <li class="chapter">
                                    <a href="#filters">Filters</a>
                                </li>
                                <li class="chapter">
                                    <a href="#customizing-the-menu-icons">Customizing the Menu Icons</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-a-custom-home-page">Using a Custom Home Page</a>
                                </li>
                                <li class="chapter">
                                    <a href="#adding-a-login-page">Adding a Login Page</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-another-rest-dialect">Using Another REST Dialect</a>
                                </li>
                                <li class="chapter">
                                    <a href="#conclusion">Conclusion</a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter active">
                            <a href="./RestClients.html">
                                <b>3.</b> REST Clients
                            </a>
                            <ul class="articles" >
                                <li class="chapter">
                                    <a href="#simple-rest">Simple REST</a>
                                </li>
                                <li class="chapter">
                                    <a href="#jsonserver-rest">JSON Server REST</a>
                                </li>
                                <li class="chapter">
                                    <a href="#adding-custom-headers">Adding Custom Headers</a>
                                </li>
                                <li class="chapter">
                                    <a href="#third-party-clients">Third-Party Clients</a>
                                </li>
                                <li class="chapter">
                                    <a href="#writing-your-own-rest-client">Writing your own REST client</a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./AdminResource.html">
                                <b>4.</b> Admin and Resource Components
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#the-admin-component"><code>&lt;Admin&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#the-resource-component"><code>&lt;Resource&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-admin-on-rest-without-admin-and-resource">Not using <code>&lt;Admin&gt;</code> and <code>&lt;Resource&gt;</code></a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./List.html">
                                <b>5.</b> The <code>&lt;List&gt;</code> View
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#the-list-component"><code>&lt;List&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#the-datagrid-component"><code>&lt;Datagrid&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#the-singlefieldlist-component"><code>&lt;SingleFieldList&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-a-custom-iterator">Using a Custom Iterator</a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./Fields.html">
                                <b>6.</b> Field Components
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#booleanfield"><code>&lt;BooleanField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#chipfield"><code>&lt;ChipField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#datefield"><code>&lt;DateField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#emailfield"><code>&lt;EmailField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#functionfield"><code>&lt;FunctionField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#numberfield"><code>&lt;NumberField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#referencefield"><code>&lt;ReferenceField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#referencemanyfield"><code>&lt;ReferenceManyField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#richtextfield"><code>&lt;RichTextField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#textfield"><code>&lt;TextField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#urlfield"><code>&lt;UrlField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#styling-fields">Styling Fields</a>
                                </li>
                                <li class="chapter">
                                    <a href="#writing-your-own-field-component">Writing your own field component</a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./CreateEdit.html">
                                <b>7.</b> The <code>&lt;Create&gt;</code> and <code>&lt;Edit&gt;</code> Views
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#the-create-and-edit-components"><code>&lt;Create&gt;</code>, <code>&lt;Edit&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#page-title">Page Title</a>
                                </li>
                                <li class="chapter">
                                    <a href="#actions">Actions</a>
                                </li>
                                <li class="chapter">
                                    <a href="#the-simpleform-component"><code>&lt;SimpleForm&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#the-tabbedform-component"><code>&lt;TabbedForm&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#default-values">Default Values</a>
                                </li>
                                <li class="chapter">
                                    <a href="#validation">Validation</a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./Inputs.html">
                                <b>8.</b> Input Components
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#autocompleteinput"><code>&lt;AutocompleteInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#booleaninput-and-nullablebooleaninput"><code>&lt;BooleanInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#dateinput"><code>&lt;DateInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#disabledinput"><code>&lt;DisabledInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#longtextinput"><code>&lt;LongTextInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#numberinput"><code>&lt;NumberInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#radiobuttongroupinput"><code>&lt;RadioButtonGroupInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#referenceinput"><code>&lt;ReferenceInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#richtextinput"><code>&lt;RichTextInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#selectinput"><code>&lt;SelectInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#textinput"><code>&lt;TextInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#writing-your-own-input-component">Writing your own input component</a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./Authentication.html">
                                <b>9.</b> Authentication
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#configuring-the-auth-client">Configuring the Auth Client</a>
                                </li>
                                <li class="chapter">
                                    <a href="#sending-credentials-to-the-rest-api">Sending Credentials to the REST API</a>
                                </li>
                                <li class="chapter">
                                    <a href="#adding-a-logout-button">Adding a Logout Button</a>
                                </li>
                                <li class="chapter">
                                    <a href="#checking-credentials-during-navigation">Checking Credentials During Navigation</a>
                                </li>
                                <li class="chapter">
                                    <a href="#customizing-the-login-and-logout-components">Customizing The Login and Logout Components</a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./Theming.html">
                                <b>10.</b> Theming
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#overriding-a-component-style">Overriding A Component Style</a>
                                </li>
                                <li class="chapter">
                                    <a href="#conditional-formatting">Conditional Formatting</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-a-predefined-theme">Using a Predefined Theme</a>
                                </li>
                                <li class="chapter">
                                    <a href="#writing-a-custom-theme">Writing a Custom Theme</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-a-custom-layout">Using a Custom Layout</a>
                                </li>
                            </ul>
                        </li>

                        <li class="chapter ">
                            <a href="./Actions.html">
                                <b>11.</b> Writing Actions
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#the-simple-way">The Simple Way</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-the-rest-client-instead-of-fetch">Using The REST Client</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-a-custom-action-creator">Using a Custom Action Creator</a>
                                </li>
                                <li class="chapter">
                                    <a href="#handling-side-effects-with-a-custom-saga">Handling Side Effects With a Custom Saga</a>
                                </li>
                                <li class="chapter">
                                    <a href="#bonus-optimistic-rendering">Bonus: Optimistic Rendering</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-a-custom-reducer">Using a Custom Reducer</a>
                                </li>
                            </ul>
                        </li>

                        <li class="chapter ">
                            <a href="./Translation.html">
                                <b>12.</b> Translation
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#changing-locale">Changing Locale</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-the-browser-locale">Using Browser Locale</a>
                                </li>
                                <li class="chapter">
                                    <a href="#translation-messages">Translation Messages</a>
                                </li>
                                <li class="chapter">
                                    <a href="#overriding-existing-translations">Overriding Existing Translations</a>
                                </li>
                                <li class="chapter">
                                    <a href="#translating-your-resources">Translating Your Resources</a>
                                </li>
                                <li class="chapter">
                                    <a href="#translating-your-own-components">Translating Your Own Components</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-specific-polyglot-features">Using Specific Polyglot Features</a>
                                </li>
                            </ul>
                        </li>

                        <li class="chapter ">
                            <a href="./CustomApp.html">
                                <b>13.</b> Including in Another App
                            </a>
                        </li>

                        <li class="chapter ">
                            <a href="./Reference.html">
                                <b>14.</b> Reference
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
            <div class="book-body">
                <div class="body-inner">
                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">

                            <div id="book-search-results">
                                <div class="search-noresults">

                                <section class="normal markdown-section">

                                <h1 id="rest-clients">REST Clients</h1>

<p>Admin-on-rest can communicate with any REST server, regardless of the REST dialect it uses. Whether it’s <a href="http://jsonapi.org/">JSON API</a>, <a href="http://stateless.co/hal_specification.html">HAL</a>, <a href="http://www.odata.org/">OData</a> or a custom dialect, the only thing admin-on-rest needs is a REST client function. This is the place to translate REST requests to HTTP requests, and HTTP responses to REST responses.</p>

<p>The <code class="highlighter-rouge">restClient</code> parameter of the <code class="highlighter-rouge">&lt;Admin&gt;</code> component, must be a function with the following signature:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cm">/**
 * Execute the REST request and return a promise for a REST response
 *
 * @example
 * restClient(GET_ONE, 'posts', { id: 123 })
 *  =&gt; new Promise(resolve =&gt; resolve({ id: 123, title: "hello, world" }))
 *
 * @param {string} type Request type, e.g GET_LIST
 * @param {string} resource Resource name, e.g. "posts"
 * @param {Object} payload Request parameters. Depends on the action type
 * @returns {Promise} the Promise for a REST response
 */</span>
<span class="kr">const</span> <span class="nx">restClient</span> <span class="o">=</span> <span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">();</span>
</code></pre>
</div>

<p>You can find a REST client example implementation in <a href="https://github.com/marmelab/admin-on-rest/blob/master/src/rest/simple.js"><code class="highlighter-rouge">src/rest/simple.js</code></a>;</p>

<p>The <code class="highlighter-rouge">restClient</code> is also the ideal place to add custom HTTP headers, authentication, etc.</p>

<h2 id="core-rest-clients">Core REST clients</h2>

<p>Admin-on-rest bundles two REST clients that you can use if your API uses a similar REST dialect.</p>

<h3 id="simple-rest">Simple REST</h3>

<p>This REST client fits APIs using simple GET parameters for filters and sorting. This is the dialect used for instance in <a href="https://github.com/marmelab/FakeRest">FakeRest</a>.</p>

<table>
  <thead>
    <tr>
      <th>REST verb</th>
      <th>API calls</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">GET_LIST</code></td>
      <td><code class="highlighter-rouge">GET http://my.api.url/posts?sort=['title','ASC']&amp;range=[0, 24]&amp;filter={title:'bar'}</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">GET_ONE</code></td>
      <td><code class="highlighter-rouge">GET http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CREATE</code></td>
      <td><code class="highlighter-rouge">POST http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">UPDATE</code></td>
      <td><code class="highlighter-rouge">PUT http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DELETE</code></td>
      <td><code class="highlighter-rouge">DELETE http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">GET_MANY</code></td>
      <td><code class="highlighter-rouge">GET http://my.api.url/posts?filter={ids:[123,456,789]}</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">GET_MANY_REFERENCE</code></td>
      <td><code class="highlighter-rouge">GET http://my.api.url/posts?filter={author_id:345}</code></td>
    </tr>
  </tbody>
</table>

<p><strong>Note</strong>: The simple REST client expects the API to include a <code class="highlighter-rouge">Content-Range</code> header in the response to <code class="highlighter-rouge">GET_LIST</code> calls. The value must be the total number of resources in the collection. This allows admin-on-rest to know how many pages of resources there are in total, and build the pagination controls.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Content-Range: posts 0-24/319
</code></pre>
</div>

<p>If your API is on another domain as the JS code, you’ll need to whitelist this header with an <code class="highlighter-rouge">Access-Control-Expose-Headers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS">CORS</a> header.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Access-Control-Expose-Headers: Content-Range
</code></pre>
</div>

<p>Here is how to use it in your admin:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/App.js</span>
<span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">'react'</span><span class="p">;</span>

<span class="kr">import</span> <span class="p">{</span> <span class="nx">simpleRestClient</span><span class="p">,</span> <span class="nx">Admin</span><span class="p">,</span> <span class="nx">Resource</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'admin-on-rest'</span><span class="p">;</span>

<span class="kr">import</span> <span class="p">{</span> <span class="nx">PostList</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'./posts'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Admin</span> <span class="nx">restClient</span><span class="o">=</span><span class="p">{</span><span class="nx">simpleRestClient</span><span class="p">(</span><span class="s1">'http://path.to.my.api/'</span><span class="p">)}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Resource</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"posts"</span> <span class="nx">list</span><span class="o">=</span><span class="p">{</span><span class="nx">PostList</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Admin</span><span class="err">&gt;
</span><span class="p">);</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre>
</div>

<h3 id="json-server-rest">JSON Server REST</h3>

<p>This REST client fits APIs powered by <a href="https://github.com/typicode/json-server">JSON Server</a>, such as <a href="http://jsonplaceholder.typicode.com/">JSONPlaceholder</a>.</p>

<table>
  <thead>
    <tr>
      <th>REST verb</th>
      <th>API calls</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">GET_LIST</code></td>
      <td><code class="highlighter-rouge">GET http://my.api.url/posts?_sort=title&amp;_order=ASC&amp;_start=0&amp;_end=24&amp;title=bar</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">GET_ONE</code></td>
      <td><code class="highlighter-rouge">GET http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CREATE</code></td>
      <td><code class="highlighter-rouge">POST http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">UPDATE</code></td>
      <td><code class="highlighter-rouge">PUT http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DELETE</code></td>
      <td><code class="highlighter-rouge">DELETE http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">GET_MANY</code></td>
      <td><code class="highlighter-rouge">GET http://my.api.url/posts/123, GET http://my.api.url/posts/456, GET http://my.api.url/posts/789</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">GET_MANY_REFERENCE</code></td>
      <td><code class="highlighter-rouge">GET http://my.api.url/posts?author_id=345</code></td>
    </tr>
  </tbody>
</table>

<p><strong>Note</strong>: The jsonServer REST client expects the API to include a <code class="highlighter-rouge">X-Total-Count</code> header in the response to <code class="highlighter-rouge">GET_LIST</code> calls. The value must be the total number of resources in the collection. This allows admin-on-rest to know how many pages of resources there are in total, and build the pagination controls.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>X-Total-Count: 319
</code></pre>
</div>

<p>If your API is on another domain as the JS code, you’ll need to whitelist this header with an <code class="highlighter-rouge">Access-Control-Expose-Headers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS">CORS</a> header.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Access-Control-Expose-Headers: X-Total-Count
</code></pre>
</div>

<p>Here is how to use it in your admin:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/App.js</span>
<span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">'react'</span><span class="p">;</span>

<span class="kr">import</span> <span class="p">{</span> <span class="nx">jsonServerRestClient</span><span class="p">,</span> <span class="nx">Admin</span><span class="p">,</span> <span class="nx">Resource</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'admin-on-rest'</span><span class="p">;</span>

<span class="kr">import</span> <span class="p">{</span> <span class="nx">PostList</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'./posts'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Admin</span> <span class="nx">restClient</span><span class="o">=</span><span class="p">{</span><span class="nx">jsonServerRestClient</span><span class="p">(</span><span class="s1">'http://jsonplaceholder.typicode.com'</span><span class="p">)}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Resource</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"posts"</span> <span class="nx">list</span><span class="o">=</span><span class="p">{</span><span class="nx">PostList</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Admin</span><span class="err">&gt;
</span><span class="p">);</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre>
</div>

<h3 id="adding-custom-headers">Adding Custom Headers</h3>

<p>Both the <code class="highlighter-rouge">simpleRestClient</code> and the <code class="highlighter-rouge">jsonServerRestClient</code> functions accept an http client function as second argument. By default, they use admin-on-rest’s <code class="highlighter-rouge">fetchUtils.fetchJson()</code> as http client. It’s similar to HTML5 <code class="highlighter-rouge">fetch()</code>, except it handles JSON decoding and HTTP error codes automatically.</p>

<p>That means that if you need to add custom headers to your requests, you just need to <em>wrap</em> the <code class="highlighter-rouge">fetchJson()</code> call inside your own function:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">simpleRestClient</span><span class="p">,</span> <span class="nx">fetchUtils</span><span class="p">,</span> <span class="nx">Admin</span><span class="p">,</span> <span class="nx">Resource</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'admin-on-rest'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">httpClient</span> <span class="o">=</span> <span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">options</span><span class="p">.</span><span class="nx">headers</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">options</span><span class="p">.</span><span class="nx">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span> <span class="na">Accept</span><span class="p">:</span> <span class="s1">'application/json'</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="c1">// add your own headers here</span>
    <span class="nx">options</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'X-Custom-Header'</span><span class="p">,</span> <span class="s1">'foobar'</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">fetchUtils</span><span class="p">.</span><span class="nx">fetchJson</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
<span class="p">}</span>
<span class="kr">const</span> <span class="nx">restClient</span> <span class="o">=</span> <span class="nx">simpleRestClient</span><span class="p">(</span><span class="s1">'http://localhost:3000'</span><span class="p">,</span> <span class="nx">httpClient</span><span class="p">);</span>

<span class="nx">render</span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Admin</span> <span class="nx">restClient</span><span class="o">=</span><span class="p">{</span><span class="nx">restClient</span><span class="p">}</span> <span class="nx">title</span><span class="o">=</span><span class="s2">"Example Admin"</span><span class="o">&gt;</span>
       <span class="p">...</span>
    <span class="o">&lt;</span><span class="sr">/Admin&gt;</span><span class="err">,
</span>    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'root'</span><span class="p">)</span>
<span class="p">);</span>
</code></pre>
</div>

<p>Now all the requests to the REST API will contain the <code class="highlighter-rouge">X-Custom-Header: foobar</code> header.</p>

<p><strong>Tip</strong>: The most common usage of custom headers is for authentication. <code class="highlighter-rouge">fetchJson</code> has built-on support for the <code class="highlighter-rouge">Authorization</code> token header:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">httpClient</span> <span class="o">=</span> <span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">options</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">authenticated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">token</span><span class="p">:</span> <span class="s1">'SRTRDFVESGNJYTUKTYTHRG'</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">fetchUtils</span><span class="p">.</span><span class="nx">fetchJson</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Now all the requests to the REST API will contain the <code class="highlighter-rouge">Authorization: SRTRDFVESGNJYTUKTYTHRG</code> header.</p>

<h3 id="third-party-clients">Third-Party Clients</h3>

<p>You can find REST clients for admin-on-rest in third-party repositories.</p>

<ul>
  <li><a href="https://github.com/marmelab/aor-json-rest-client">marmelab/aor-json-rest-client</a> provides a local REST client based on a JavaScript object. It doesn’t even use HTTP. Use it for testing purposes.</li>
</ul>

<h2 id="writing-your-own-rest-client">Writing your own REST client</h2>

<p>Quite often, none of the the core REST clients match your API exactly. In such cases, you’ll have to write your own REST client. But don’t be afraid, it’s easy!</p>

<h3 id="request-format">Request Format</h3>

<p>REST requests require a <em>type</em> (e.g. <code class="highlighter-rouge">GET_ONE</code>), a <em>resource</em> (e.g. ‘posts’) and a set of <em>parameters</em>.</p>

<p><em>Tip</em>: In comparison, HTTP requests require a <em>verb</em> (e.g. ‘GET’), an <em>url</em> (e.g. ‘http://myapi.com/posts’), a list of <em>headers</em> (like <code class="highlighter-rouge">Content-Type</code>) and a <em>body</em>.</p>

<p>Possible types are:</p>

<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Params format</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">GET_LIST</code></td>
      <td><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">pagination:</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="err">page:</span><span class="w"> </span><span class="err">{int</span><span class="p">}</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="err">perPage:</span><span class="w"> </span><span class="p">{</span><span class="err">int</span><span class="p">}</span><span class="w"> </span><span class="err">},</span><span class="w"> </span><span class="err">sort:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">field:</span><span class="w"> </span><span class="err">{string</span><span class="p">}</span><span class="err">,</span><span class="w"> </span><span class="err">order:</span><span class="w"> </span><span class="p">{</span><span class="err">string</span><span class="p">}</span><span class="w"> </span><span class="err">}</span><span class="w"> </span><span class="err">}</span></code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">GET_ONE</code></td>
      <td><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">id:</span><span class="w"> </span><span class="err">{mixed</span><span class="p">}</span><span class="w"> </span><span class="err">}</span></code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CREATE</code></td>
      <td><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">data:</span><span class="w"> </span><span class="err">{Object</span><span class="p">}</span><span class="w"> </span><span class="err">}</span></code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">UPDATE</code></td>
      <td><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">id:</span><span class="w"> </span><span class="err">{mixed</span><span class="p">}</span><span class="err">,</span><span class="w"> </span><span class="err">data:</span><span class="w"> </span><span class="p">{</span><span class="err">Object</span><span class="p">}</span><span class="w"> </span><span class="err">}</span></code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DELETE</code></td>
      <td><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">id:</span><span class="w"> </span><span class="err">{mixed</span><span class="p">}</span><span class="w"> </span><span class="err">}</span></code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">GET_MANY</code></td>
      <td><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">ids:</span><span class="w"> </span><span class="err">{mixed[]</span><span class="p">}</span><span class="w"> </span><span class="err">}</span></code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">GET_MANY_REFERENCE</code></td>
      <td><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">target:</span><span class="w"> </span><span class="err">{string</span><span class="p">}</span><span class="err">,</span><span class="w"> </span><span class="err">id:</span><span class="w"> </span><span class="p">{</span><span class="err">mixed</span><span class="p">}</span><span class="err">,</span><span class="w"> </span><span class="err">pagination:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">page:</span><span class="w"> </span><span class="err">{int</span><span class="p">}</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="err">perPage:</span><span class="w"> </span><span class="p">{</span><span class="err">int</span><span class="p">}</span><span class="w"> </span><span class="err">},</span><span class="w"> </span><span class="err">sort:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">field:</span><span class="w"> </span><span class="err">{string</span><span class="p">}</span><span class="err">,</span><span class="w"> </span><span class="err">order:</span><span class="w"> </span><span class="p">{</span><span class="err">string</span><span class="p">}</span><span class="w"> </span><span class="err">}</span><span class="w"> </span><span class="err">}</span></code></td>
    </tr>
  </tbody>
</table>

<p>Examples:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">restClient</span><span class="p">(</span><span class="nx">GET_LIST</span><span class="p">,</span> <span class="s1">'posts'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">pagination</span><span class="p">:</span> <span class="p">{</span> <span class="na">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">perPage</span><span class="p">:</span> <span class="mi">5</span> <span class="p">},</span>
    <span class="na">sort</span><span class="p">:</span> <span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="s1">'title'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="s1">'ASC'</span> <span class="p">},</span>
<span class="p">});</span>
<span class="nx">restClient</span><span class="p">(</span><span class="nx">GET_ONE</span><span class="p">,</span> <span class="s1">'posts'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">123</span> <span class="p">});</span>
<span class="nx">restClient</span><span class="p">(</span><span class="nx">CREATE</span><span class="p">,</span> <span class="s1">'posts'</span><span class="p">,</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="s2">"hello, world"</span> <span class="p">});</span>
<span class="nx">restClient</span><span class="p">(</span><span class="nx">UPDATE</span><span class="p">,</span> <span class="s1">'posts'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="s2">"hello, world!"</span> <span class="p">}</span> <span class="p">});</span>
<span class="nx">restClient</span><span class="p">(</span><span class="nx">DELETE</span><span class="p">,</span> <span class="s1">'posts'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">123</span> <span class="p">});</span>
<span class="nx">restClient</span><span class="p">(</span><span class="nx">GET_MANY</span><span class="p">,</span> <span class="s1">'posts'</span><span class="p">,</span> <span class="p">{</span> <span class="na">ids</span><span class="p">:</span> <span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">124</span><span class="p">,</span> <span class="mi">125</span><span class="p">]</span> <span class="p">});</span>
<span class="nx">restClient</span><span class="p">(</span><span class="nx">GET_MANY_REFERENCE</span><span class="p">,</span> <span class="s1">'comments'</span><span class="p">,</span> <span class="p">{</span> <span class="na">target</span><span class="p">:</span> <span class="s1">'post_id'</span><span class="p">,</span> <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="na">sort</span><span class="p">:</span> <span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="s1">'created_at'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="s1">'DESC'</span> <span class="p">}</span> <span class="p">});</span>
</code></pre>
</div>

<h3 id="response-format">Response Format</h3>

<p>REST responses are objects. The format depends on the type.</p>

<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Response format</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">GET_LIST</code></td>
      <td><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">data:</span><span class="w"> </span><span class="err">{Record[]</span><span class="p">}</span><span class="err">,</span><span class="w"> </span><span class="err">total:</span><span class="w"> </span><span class="p">{</span><span class="err">int</span><span class="p">}</span><span class="w"> </span><span class="err">}</span></code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">GET_ONE</code></td>
      <td><code class="highlighter-rouge"><span class="p">{</span><span class="err">Record</span><span class="p">}</span></code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CREATE</code></td>
      <td><code class="highlighter-rouge"><span class="p">{</span><span class="err">Record</span><span class="p">}</span></code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">UPDATE</code></td>
      <td><code class="highlighter-rouge"><span class="p">{</span><span class="err">Record</span><span class="p">}</span></code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DELETE</code></td>
      <td><code class="highlighter-rouge"><span class="p">{</span><span class="err">Record</span><span class="p">}</span></code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">GET_MANY</code></td>
      <td><code class="highlighter-rouge"><span class="p">{</span><span class="err">Record[]</span><span class="p">}</span></code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">GET_MANY_REFERENCE</code></td>
      <td><code class="highlighter-rouge"><span class="p">{</span><span class="err">Record[]</span><span class="p">}</span></code></td>
    </tr>
  </tbody>
</table>

<p>A <code class="highlighter-rouge"><span class="p">{</span><span class="err">Record</span><span class="p">}</span></code> is an object literal with at least an <code class="highlighter-rouge">id</code> property, e.g. <code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">id:</span><span class="w"> </span><span class="err">123,</span><span class="w"> </span><span class="err">title:</span><span class="w"> </span><span class="nt">"hello, world"</span><span class="w"> </span><span class="err">}</span></code>.</p>

<p>Examples:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">restClient</span><span class="p">(</span><span class="nx">GET_LIST</span><span class="p">,</span> <span class="s1">'posts'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">pagination</span><span class="p">:</span> <span class="p">{</span> <span class="na">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">perPage</span><span class="p">:</span> <span class="mi">5</span> <span class="p">},</span>
    <span class="na">sort</span><span class="p">:</span> <span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="s1">'title'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="s1">'ASC'</span> <span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
<span class="c1">// {</span>
<span class="c1">//     data: [</span>
<span class="c1">//         { id: 126, title: "allo?" },</span>
<span class="c1">//         { id: 127, title: "bien le bonjour" },</span>
<span class="c1">//         { id: 124, title: "good day sunshise" },</span>
<span class="c1">//         { id: 123, title: "hello, world" },</span>
<span class="c1">//         { id: 125, title: "howdy partner" },</span>
<span class="c1">//     ],</span>
<span class="c1">//     total: 27</span>
<span class="c1">// }</span>

<span class="nx">restClient</span><span class="p">(</span><span class="nx">GET_ONE</span><span class="p">,</span> <span class="s1">'posts'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">123</span> <span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">record</span><span class="p">));</span>
<span class="c1">// {</span>
<span class="c1">//     id: 123,</span>
<span class="c1">//     title: "hello, world"</span>
<span class="c1">// }</span>

<span class="nx">restClient</span><span class="p">(</span><span class="nx">CREATE</span><span class="p">,</span> <span class="s1">'posts'</span><span class="p">,</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="s2">"hello, world"</span> <span class="p">});</span>
<span class="c1">// {</span>
<span class="c1">//     id: 450,</span>
<span class="c1">//     title: "hello, world"</span>
<span class="c1">// }</span>

<span class="nx">restClient</span><span class="p">(</span><span class="nx">UPDATE</span><span class="p">,</span> <span class="s1">'posts'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="s2">"hello, world!"</span> <span class="p">}</span> <span class="p">});</span>
<span class="c1">// {</span>
<span class="c1">//     id: 123,</span>
<span class="c1">//     title: "hello, world!"</span>
<span class="c1">// }</span>

<span class="nx">restClient</span><span class="p">(</span><span class="nx">DELETE</span><span class="p">,</span> <span class="s1">'posts'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">123</span> <span class="p">});</span>
<span class="c1">// {</span>
<span class="c1">//     id: 123,</span>
<span class="c1">//     title: "hello, world"</span>
<span class="c1">// }</span>

<span class="nx">restClient</span><span class="p">(</span><span class="nx">GET_MANY</span><span class="p">,</span> <span class="s1">'posts'</span><span class="p">,</span> <span class="p">{</span> <span class="na">ids</span><span class="p">:</span> <span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">124</span><span class="p">,</span> <span class="mi">125</span><span class="p">]</span> <span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">records</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">records</span><span class="p">));</span>
<span class="c1">// [</span>
<span class="c1">//     { id: 123, title: "hello, world" },</span>
<span class="c1">//     { id: 124, title: "good day sunshise" },</span>
<span class="c1">//     { id: 125, title: "howdy partner" },</span>
<span class="c1">// ]</span>

<span class="nx">restClient</span><span class="p">(</span><span class="nx">GET_MANY_REFERENCE</span><span class="p">,</span> <span class="s1">'comments'</span><span class="p">,</span> <span class="p">{</span> <span class="na">target</span><span class="p">:</span> <span class="s1">'post_id'</span><span class="p">,</span> <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="na">sort</span><span class="p">:</span> <span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="s1">'created_at'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="s1">'DESC'</span> <span class="p">}</span> <span class="p">});</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">records</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">records</span><span class="p">));</span>
<span class="c1">// [</span>
<span class="c1">//     { id: 667, title: "I agree", post_id: 123 },</span>
<span class="c1">//     { id: 895, title: "I don't agree", post_id: 123 },</span>
<span class="c1">// ]</span>
</code></pre>
</div>

<h3 id="error-format">Error Format</h3>

<p>When the REST API returns an error, the rest client should <code class="highlighter-rouge">throw</code> an <code class="highlighter-rouge">Error</code> object. This object should contain a <code class="highlighter-rouge">status</code> property with the HTTP response code (404, 500, etc.). Admin-on-rest inspects this error code, and uses it for <a href="./Authentication.md">authentication</a> (in case of 401 or 403 errors).</p>

<h3 id="example-implementation">Example implementation</h3>

<p>Check the code from the <a href="https://github.com/marmelab/admin-on-rest/blob/master/src/rest/simple.js">simple REST client</a>: it’s a good starting point for a custom rest client implementation.</p>


                                </section>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>

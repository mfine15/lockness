<!DOCTYPE HTML>
<html lang="en-US">
    <head>
        <title>Admin-on-rest - My First Project Tutorial</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/syntax.css">
    </head>
    <body>
        <div class="book with-summary font-size-2 font-family-1">
            <div class="book-summary">
                <nav role="navigation">
                    <ul class="summary">
                        <li class="header">Table of Contents</li>
                        <li class="chapter ">
                            <a href="./index.html">
                                <b>1.</b> Read Me
                            </a>
                        </li>
                        <li class="chapter active">
                            <a href="./Tutorial.html">
                                <b>2.</b> Tutorial
                            </a>
                            <ul class="articles" >
                                <li class="chapter">
                                    <a href="#installation">Installation</a>
                                </li>
                                <li class="chapter">
                                    <a href="#making-contact-with-the-api">Making Contact With The API</a>
                                </li>
                                <li class="chapter">
                                    <a href="#field-types">Field Types</a>
                                </li>
                                <li class="chapter">
                                    <a href="#relationships">Relationships</a>
                                </li>
                                <li class="chapter">
                                    <a href="#creation-and-edition">Creation and Edition</a>
                                </li>
                                <li class="chapter">
                                    <a href="#deletion">Deletion</a>
                                </li>
                                <li class="chapter">
                                    <a href="#filters">Filters</a>
                                </li>
                                <li class="chapter">
                                    <a href="#customizing-the-menu-icons">Customizing the Menu Icons</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-a-custom-home-page">Using a Custom Home Page</a>
                                </li>
                                <li class="chapter">
                                    <a href="#adding-a-login-page">Adding a Login Page</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-another-rest-dialect">Using Another REST Dialect</a>
                                </li>
                                <li class="chapter">
                                    <a href="#conclusion">Conclusion</a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./RestClients.html">
                                <b>3.</b> REST Clients
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#simple-rest">Simple REST</a>
                                </li>
                                <li class="chapter">
                                    <a href="#jsonserver-rest">JSON Server REST</a>
                                </li>
                                <li class="chapter">
                                    <a href="#adding-custom-headers">Adding Custom Headers</a>
                                </li>
                                <li class="chapter">
                                    <a href="#third-party-clients">Third-Party Clients</a>
                                </li>
                                <li class="chapter">
                                    <a href="#writing-your-own-rest-client">Writing your own REST client</a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./AdminResource.html">
                                <b>4.</b> Admin and Resource Components
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#the-admin-component"><code>&lt;Admin&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#the-resource-component"><code>&lt;Resource&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-admin-on-rest-without-admin-and-resource">Not using <code>&lt;Admin&gt;</code> and <code>&lt;Resource&gt;</code></a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./List.html">
                                <b>5.</b> The <code>&lt;List&gt;</code> View
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#the-list-component"><code>&lt;List&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#the-datagrid-component"><code>&lt;Datagrid&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#the-singlefieldlist-component"><code>&lt;SingleFieldList&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-a-custom-iterator">Using a Custom Iterator</a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./Fields.html">
                                <b>6.</b> Field Components
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#booleanfield"><code>&lt;BooleanField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#chipfield"><code>&lt;ChipField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#datefield"><code>&lt;DateField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#emailfield"><code>&lt;EmailField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#functionfield"><code>&lt;FunctionField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#numberfield"><code>&lt;NumberField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#referencefield"><code>&lt;ReferenceField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#referencemanyfield"><code>&lt;ReferenceManyField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#richtextfield"><code>&lt;RichTextField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#textfield"><code>&lt;TextField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#urlfield"><code>&lt;UrlField&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#styling-fields">Styling Fields</a>
                                </li>
                                <li class="chapter">
                                    <a href="#writing-your-own-field-component">Writing your own field component</a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./CreateEdit.html">
                                <b>7.</b> The <code>&lt;Create&gt;</code> and <code>&lt;Edit&gt;</code> Views
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#the-create-and-edit-components"><code>&lt;Create&gt;</code>, <code>&lt;Edit&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#page-title">Page Title</a>
                                </li>
                                <li class="chapter">
                                    <a href="#actions">Actions</a>
                                </li>
                                <li class="chapter">
                                    <a href="#the-simpleform-component"><code>&lt;SimpleForm&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#the-tabbedform-component"><code>&lt;TabbedForm&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#default-values">Default Values</a>
                                </li>
                                <li class="chapter">
                                    <a href="#validation">Validation</a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./Inputs.html">
                                <b>8.</b> Input Components
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#autocompleteinput"><code>&lt;AutocompleteInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#booleaninput-and-nullablebooleaninput"><code>&lt;BooleanInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#dateinput"><code>&lt;DateInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#disabledinput"><code>&lt;DisabledInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#longtextinput"><code>&lt;LongTextInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#numberinput"><code>&lt;NumberInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#radiobuttongroupinput"><code>&lt;RadioButtonGroupInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#referenceinput"><code>&lt;ReferenceInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#richtextinput"><code>&lt;RichTextInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#selectinput"><code>&lt;SelectInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#textinput"><code>&lt;TextInput&gt;</code></a>
                                </li>
                                <li class="chapter">
                                    <a href="#writing-your-own-input-component">Writing your own input component</a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./Authentication.html">
                                <b>9.</b> Authentication
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#configuring-the-auth-client">Configuring the Auth Client</a>
                                </li>
                                <li class="chapter">
                                    <a href="#sending-credentials-to-the-rest-api">Sending Credentials to the REST API</a>
                                </li>
                                <li class="chapter">
                                    <a href="#adding-a-logout-button">Adding a Logout Button</a>
                                </li>
                                <li class="chapter">
                                    <a href="#checking-credentials-during-navigation">Checking Credentials During Navigation</a>
                                </li>
                                <li class="chapter">
                                    <a href="#customizing-the-login-and-logout-components">Customizing The Login and Logout Components</a>
                                </li>
                            </ul>
                        </li>
                        <li class="chapter ">
                            <a href="./Theming.html">
                                <b>10.</b> Theming
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#overriding-a-component-style">Overriding A Component Style</a>
                                </li>
                                <li class="chapter">
                                    <a href="#conditional-formatting">Conditional Formatting</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-a-predefined-theme">Using a Predefined Theme</a>
                                </li>
                                <li class="chapter">
                                    <a href="#writing-a-custom-theme">Writing a Custom Theme</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-a-custom-layout">Using a Custom Layout</a>
                                </li>
                            </ul>
                        </li>

                        <li class="chapter ">
                            <a href="./Actions.html">
                                <b>11.</b> Writing Actions
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#the-simple-way">The Simple Way</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-the-rest-client-instead-of-fetch">Using The REST Client</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-a-custom-action-creator">Using a Custom Action Creator</a>
                                </li>
                                <li class="chapter">
                                    <a href="#handling-side-effects-with-a-custom-saga">Handling Side Effects With a Custom Saga</a>
                                </li>
                                <li class="chapter">
                                    <a href="#bonus-optimistic-rendering">Bonus: Optimistic Rendering</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-a-custom-reducer">Using a Custom Reducer</a>
                                </li>
                            </ul>
                        </li>

                        <li class="chapter ">
                            <a href="./Translation.html">
                                <b>12.</b> Translation
                            </a>
                            <ul class="articles" style="display:none">
                                <li class="chapter">
                                    <a href="#changing-locale">Changing Locale</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-the-browser-locale">Using Browser Locale</a>
                                </li>
                                <li class="chapter">
                                    <a href="#translation-messages">Translation Messages</a>
                                </li>
                                <li class="chapter">
                                    <a href="#overriding-existing-translations">Overriding Existing Translations</a>
                                </li>
                                <li class="chapter">
                                    <a href="#translating-your-resources">Translating Your Resources</a>
                                </li>
                                <li class="chapter">
                                    <a href="#translating-your-own-components">Translating Your Own Components</a>
                                </li>
                                <li class="chapter">
                                    <a href="#using-specific-polyglot-features">Using Specific Polyglot Features</a>
                                </li>
                            </ul>
                        </li>

                        <li class="chapter ">
                            <a href="./CustomApp.html">
                                <b>13.</b> Including in Another App
                            </a>
                        </li>

                        <li class="chapter ">
                            <a href="./Reference.html">
                                <b>14.</b> Reference
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
            <div class="book-body">
                <div class="body-inner">
                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">

                            <div id="book-search-results">
                                <div class="search-noresults">

                                <section class="normal markdown-section">

                                <h1 id="admin-on-rest-tutorial">Admin-on-REST Tutorial</h1>

<p>This 15 minutes tutorial will expose how to create a new admin app based on an existing REST API.</p>

<h2 id="installation">Installation</h2>

<p>Admin-on-REST uses React. We’ll use Facebook’s <a href="https://github.com/facebookincubator/create-react-app">react-create-app</a> to create an empty React app, and install the <code class="highlighter-rouge">admin-on-rest</code> npm package:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>npm install -g create-react-app
create-react-app <span class="nb">test</span>-admin
<span class="nb">cd test</span>-admin/
npm install --save-dev admin-on-rest
npm start
</code></pre>
</div>

<p>You should be up and running with an empty React application on port 3000.</p>

<p>The API is not stable yet, so make sure you read the correct version of this tutorial,
which you should be able to find locally as <code class="highlighter-rouge">node_modules/admin-on-rest/docs/Tutorial.md</code>.</p>

<h2 id="making-contact-with-the-api">Making Contact With The API</h2>

<p>We’ll be using <a href="http://jsonplaceholder.typicode.com/">JSONPlaceholder</a>, which is a fake online REST API for testing and prototyping, as the datasource for the admin.</p>

<p>JSONPlaceholder provides endpoints for fake posts, fake comments, and fake users. The admin we’ll build will allow to Create, Retrieve, Update, and Delete (CRUD) these resources.</p>

<p>Replace the <code class="highlighter-rouge">src/App.js</code> by the following code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/App.js</span>
<span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">'react'</span><span class="p">;</span>

<span class="kr">import</span> <span class="p">{</span> <span class="nx">jsonServerRestClient</span><span class="p">,</span> <span class="nx">Admin</span><span class="p">,</span> <span class="nx">Resource</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'admin-on-rest'</span><span class="p">;</span>

<span class="kr">import</span> <span class="p">{</span> <span class="nx">PostList</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'./posts'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Admin</span> <span class="nx">restClient</span><span class="o">=</span><span class="p">{</span><span class="nx">jsonServerRestClient</span><span class="p">(</span><span class="s1">'http://jsonplaceholder.typicode.com'</span><span class="p">)}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Resource</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"posts"</span> <span class="nx">list</span><span class="o">=</span><span class="p">{</span><span class="nx">PostList</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Admin</span><span class="err">&gt;
</span><span class="p">);</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre>
</div>

<p>The App component now renders an <code class="highlighter-rouge">&lt;Admin&gt;</code> component, which is the main component of admin-on-rest. This component expects a REST client as a parameter - a function capable of translating REST commands into HTTP requests. Since REST isn’t a standard, you will probably have to provide a custom client to connect to your own APIs. But we’ll dive into REST clients later. For now, let’s take advantage of the <code class="highlighter-rouge">jsonServerRestClient</code>, which speaks the same REST dialect as JSONPlaceholder.</p>

<p>The <code class="highlighter-rouge">&lt;Admin&gt;</code> component contains <code class="highlighter-rouge">&lt;Resource&gt;</code> components, each resource being mapped to an endpoint in the API. To begin with, we’ll display the list of posts. Here is what the <code class="highlighter-rouge">&lt;PostList&gt;</code> component looks like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">TextField</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'admin-on-rest/lib/mui'</span><span class="p">;</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">List</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Datagrid</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">TextField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"id"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">TextField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"title"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">TextField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"body"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/Datagrid</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/List</span><span class="err">&gt;
</span><span class="p">);</span>
</code></pre>
</div>

<p>Notice that the components we use here are from <code class="highlighter-rouge">admin-on-rest/lib/mui</code> - these are Material UI components.</p>

<p>The main component of the post list is a <code class="highlighter-rouge">&lt;List&gt;</code> component, responsible for grabbing the information from the url, displaying the page title, and handling pagination. This list then delegates the display of the actual list of posts to a <code class="highlighter-rouge">&lt;Datagrid&gt;</code>, responsible for displaying a table with one row for each post. As for which columns should be displayed in this table, that’s what the bunch of <code class="highlighter-rouge">&lt;TextField&gt;</code> components are for, each mapping a different source field in the API response.</p>

<p>That should be enough to display the post list:</p>

<p><img src="./img/simple-post-list.png" alt="Simple posts list" /></p>

<p>The list is already functional: you can change the ordering by clicking on column headers, or change pages by using the bottom pagination controls.</p>

<h2 id="field-types">Field Types</h2>

<p>So far, you’ve only seen <code class="highlighter-rouge">&lt;TextField&gt;</code>, but if the API sends resources with other types of content, admin-on-rest can provide more features. For instance, <a href="http://jsonplaceholder.typicode.com/comments">the <code class="highlighter-rouge">/users</code> endpoint in JSONPlaceholder</a> contains emails. Let’s see how the list displays them:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/users.js</span>
<span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">EmailField</span><span class="p">,</span> <span class="nx">TextField</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'admin-on-rest/lib/mui'</span><span class="p">;</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">UserList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">List</span> <span class="nx">title</span><span class="o">=</span><span class="s2">"All users"</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Datagrid</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">TextField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"id"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">TextField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"name"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">TextField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"username"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">EmailField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"email"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/Datagrid</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/List</span><span class="err">&gt;
</span><span class="p">);</span>
</code></pre>
</div>

<p>You’ll notice that we override the default <code class="highlighter-rouge">title</code> of this list. To include the new <code class="highlighter-rouge">users</code> resource in the admin app, add it in <code class="highlighter-rouge">src/App.js</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/App.js</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">PostList</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'./posts'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">UserList</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'./users'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Admin</span> <span class="nx">restClient</span><span class="o">=</span><span class="p">{</span><span class="nx">jsonServerRestClient</span><span class="p">(</span><span class="s1">'http://jsonplaceholder.typicode.com'</span><span class="p">)}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Resource</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"posts"</span> <span class="nx">list</span><span class="o">=</span><span class="p">{</span><span class="nx">PostList</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Resource</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"users"</span> <span class="nx">list</span><span class="o">=</span><span class="p">{</span><span class="nx">UserList</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Admin</span><span class="err">&gt;
</span><span class="p">);</span>
</code></pre>
</div>

<p><img src="./img/simple-user-list.png" alt="Simple user datagrid" /></p>

<p>The sidebar now gives access to the second resource, Users. The users list shows the email as a <code class="highlighter-rouge">&lt;a href="mailto:"&gt;</code> tag.</p>

<p>In admin-on-rest, fields are simple React components. At runtime, they receive the <code class="highlighter-rouge">record</code> they operate on (coming from the API, e.g. <code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Leanne Graham"</span><span class="p">,</span><span class="w"> </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bret"</span><span class="p">,</span><span class="w"> </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sincere@april.biz"</span><span class="w"> </span><span class="p">}</span></code>), and the <code class="highlighter-rouge">source</code> field they should display (e.g. ‘email’). That means that the code for field components is really simple:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in admin-on-rest/src/mui/field/EmailField.js</span>
<span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">PropTypes</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'react'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">EmailField</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">record</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">source</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="p">{</span><span class="err">`</span><span class="na">mailto</span><span class="p">:</span><span class="nx">$</span><span class="p">{</span><span class="nx">record</span><span class="p">[</span><span class="nx">source</span><span class="p">]}</span><span class="err">`</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">record</span><span class="p">[</span><span class="nx">source</span><span class="p">]}</span><span class="o">&lt;</span><span class="sr">/a&gt;</span><span class="err">;
</span>
<span class="nx">EmailField</span><span class="p">.</span><span class="nx">propTypes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">source</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">isRequired</span><span class="p">,</span>
    <span class="na">record</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">object</span><span class="p">,</span>
<span class="p">};</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">EmailField</span><span class="p">;</span>
</code></pre>
</div>

<p>Creating your own custom fields shouldn’t be too difficult.</p>

<h2 id="relationships">Relationships</h2>

<p>In JSONPlaceholder, each <code class="highlighter-rouge">post</code> record includes a <code class="highlighter-rouge">userId</code> field, which points to a <code class="highlighter-rouge">user</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sunt aut facere repellat provident occaecati excepturi optio reprehenderit"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Admin-on-REST knows how to take advantage of these foreign keys to fetch references to a given record. For instance, to include the user name in the posts list, use the <code class="highlighter-rouge">&lt;ReferenceField&gt;</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">TextField</span><span class="p">,</span> <span class="nx">EmailField</span><span class="p">,</span> <span class="nx">ReferenceField</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'admin-on-rest/lib/mui'</span><span class="p">;</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">List</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Datagrid</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">TextField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"id"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">ReferenceField</span> <span class="nx">label</span><span class="o">=</span><span class="s2">"User"</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"userId"</span> <span class="nx">reference</span><span class="o">=</span><span class="s2">"users"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">TextField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"name"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="sr">/ReferenceField</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">TextField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"title"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">TextField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"body"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/Datagrid</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/List</span><span class="err">&gt;
</span><span class="p">);</span>
</code></pre>
</div>

<p>When displaying the posts list, the browser now fetches related user records, and displays their <code class="highlighter-rouge">name</code> as a <code class="highlighter-rouge">&lt;TextField&gt;</code>. Notice the <code class="highlighter-rouge">label</code> property: you can use it on any field component to customize the list header.</p>

<p><img src="./img/reference-posts.png" alt="reference posts in comment list" /></p>

<p><strong>Tip</strong>: Reference components always pass the data they fetch to a child component, which is responsible for displaying the data.</p>

<h2 id="creation-and-edition">Creation and Edition</h2>

<p>An admin interface is usually for more than seeing remote data - it’s for editing and creating, too. Admin-on-REST provides <code class="highlighter-rouge">&lt;Create&gt;</code> and <code class="highlighter-rouge">&lt;Edit&gt;</code> components for that purpose. We’ll add them to the <code class="highlighter-rouge">posts</code> resource:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">Edit</span><span class="p">,</span> <span class="nx">Create</span><span class="p">,</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">ReferenceField</span><span class="p">,</span> <span class="nx">TextField</span><span class="p">,</span> <span class="nx">EditButton</span><span class="p">,</span> <span class="nx">DisabledInput</span><span class="p">,</span> <span class="nx">LongTextInput</span><span class="p">,</span> <span class="nx">ReferenceInput</span><span class="p">,</span> <span class="nx">SelectInput</span><span class="p">,</span> <span class="nx">SimpleForm</span><span class="p">,</span> <span class="nx">TextInput</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'admin-on-rest/lib/mui'</span><span class="p">;</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">List</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Datagrid</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">TextField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"id"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">ReferenceField</span> <span class="nx">label</span><span class="o">=</span><span class="s2">"User"</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"userId"</span> <span class="nx">reference</span><span class="o">=</span><span class="s2">"users"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">TextField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"name"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="sr">/ReferenceField</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">TextField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"title"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">TextField</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"body"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">EditButton</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/Datagrid</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/List</span><span class="err">&gt;
</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">PostTitle</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">record</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span><span class="nx">Post</span> <span class="p">{</span><span class="nx">record</span> <span class="p">?</span> <span class="err">`</span><span class="s2">"${record.title}"</span><span class="err">`</span> <span class="p">:</span> <span class="s1">''</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/span&gt;</span><span class="err">;
</span><span class="p">};</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Edit</span> <span class="nx">title</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">PostTitle</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">SimpleForm</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">DisabledInput</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"id"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">ReferenceInput</span> <span class="nx">label</span><span class="o">=</span><span class="s2">"User"</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"userId"</span> <span class="nx">reference</span><span class="o">=</span><span class="s2">"users"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">SelectInput</span> <span class="nx">optionText</span><span class="o">=</span><span class="s2">"name"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="sr">/ReferenceInput</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">TextInput</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"title"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">LongTextInput</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"body"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/SimpleForm</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Edit</span><span class="err">&gt;
</span><span class="p">);</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">PostCreate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Create</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">SimpleForm</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">ReferenceInput</span> <span class="nx">label</span><span class="o">=</span><span class="s2">"User"</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"userId"</span> <span class="nx">reference</span><span class="o">=</span><span class="s2">"users"</span> <span class="nx">allowEmpty</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">SelectInput</span> <span class="nx">optionText</span><span class="o">=</span><span class="s2">"name"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="sr">/ReferenceInput</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">TextInput</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"title"</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">LongTextInput</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"body"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/SimpleForm</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Create</span><span class="err">&gt;
</span><span class="p">);</span>
</code></pre>
</div>

<p>Notice the additional <code class="highlighter-rouge">&lt;EditButton&gt;</code> field in the <code class="highlighter-rouge">&lt;PostList&gt;</code> component children: that’s what gives access to the post edition view. Also, the <code class="highlighter-rouge">&lt;Edit&gt;</code> component uses a custom <code class="highlighter-rouge">&lt;PostTitle&gt;</code> component as title, which shows the way to customize the title of a given view.</p>

<p>If you’ve understood the <code class="highlighter-rouge">&lt;List&gt;</code> component, the <code class="highlighter-rouge">&lt;Edit&gt;</code> and <code class="highlighter-rouge">&lt;Create&gt;</code> components will be no surprise. They are responsible for displaying the page title and preparing the data (fetching and setting default values). They pass the data to the <code class="highlighter-rouge">&lt;SimpleForm&gt;</code> component, which is responsible for the form layout and validation. Just like <code class="highlighter-rouge">&lt;Datagrid&gt;</code>, <code class="highlighter-rouge">&lt;SimpleForm&gt;</code> uses its children to display the form inputs. It expects <em>input components</em> as children. <code class="highlighter-rouge">&lt;DisabledInput&gt;</code>, <code class="highlighter-rouge">&lt;TextInput&gt;</code>, <code class="highlighter-rouge">&lt;LongTextInput&gt;</code>, and <code class="highlighter-rouge">&lt;ReferenceInput&gt;</code> are such inputs.</p>

<p>As for the <code class="highlighter-rouge">&lt;ReferenceInput&gt;</code>, it takes the same attributes as the <code class="highlighter-rouge">&lt;ReferenceField&gt;</code> (used earlier in the list view). <code class="highlighter-rouge">&lt;ReferenceInput&gt;</code> uses these attributes to fetch the API for possible references for the current record (in this case, possible <code class="highlighter-rouge">users</code> for the current <code class="highlighter-rouge">post</code>). Once it gets these possible records, it passes them to the child component (<code class="highlighter-rouge">&lt;SelectInput&gt;</code>), which is responsible for displaying them (via their <code class="highlighter-rouge">name</code> in that case) and letting the user select one. <code class="highlighter-rouge">&lt;SelectInput&gt;</code> renders as a <code class="highlighter-rouge">&lt;select&gt;</code> tag in HTML.</p>

<p><strong>Tip</strong>: The <code class="highlighter-rouge">&lt;Edit&gt;</code> and the <code class="highlighter-rouge">&lt;Create&gt;</code> components use the same <code class="highlighter-rouge">&lt;ReferenceInput&gt;</code> configuration, except for the <code class="highlighter-rouge">allowEmpty</code> attribute, which is required in <code class="highlighter-rouge">&lt;Create&gt;</code>.</p>

<p>To use the new <code class="highlighter-rouge">&lt;PostEdit&gt;</code> and <code class="highlighter-rouge">&lt;PostCreate&gt;</code> components in the posts resource, just add them as <code class="highlighter-rouge">edit</code> and <code class="highlighter-rouge">create</code> attributes to the <code class="highlighter-rouge">&lt;Resource&gt;</code> component:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/App.js</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">PostList</span><span class="p">,</span> <span class="nx">PostEdit</span><span class="p">,</span> <span class="nx">PostCreate</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'./posts'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">UserList</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'./users'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Admin</span> <span class="nx">restClient</span><span class="o">=</span><span class="p">{</span><span class="nx">jsonServerRestClient</span><span class="p">(</span><span class="s1">'http://jsonplaceholder.typicode.com'</span><span class="p">)}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Resource</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"posts"</span> <span class="nx">list</span><span class="o">=</span><span class="p">{</span><span class="nx">PostList</span><span class="p">}</span> <span class="nx">edit</span><span class="o">=</span><span class="p">{</span><span class="nx">PostEdit</span><span class="p">}</span> <span class="nx">create</span><span class="o">=</span><span class="p">{</span><span class="nx">PostCreate</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="c1">// ...</span>
    <span class="o">&lt;</span><span class="sr">/Admin</span><span class="err">&gt;
</span><span class="p">);</span>
</code></pre>
</div>

<p>Admin-on-rest automatically adds a “create” button on top of the posts list to give access to the <code class="highlighter-rouge">&lt;PostCreate&gt;</code> component. And the <code class="highlighter-rouge">&lt;EditButton&gt;</code> renders in each line of the list to give access to the <code class="highlighter-rouge">&lt;PostEdit&gt;</code> component.</p>

<p><img src="./img/editable-post.png" alt="post list with access to edit and create" /></p>

<p>The create and edit views render as a form. It’s already functional, and automatically issues <code class="highlighter-rouge">POST</code> and <code class="highlighter-rouge">PUT</code> requests to the REST API.</p>

<p><img src="./img/post-edition.png" alt="post edition form" /></p>

<p><strong>Note</strong>: JSONPlaceholder is a read-only API: although it seems to accept <code class="highlighter-rouge">POST</code> and <code class="highlighter-rouge">PUT</code> requests, it doesn’t take into account the creations and editions - that’s why, in this particular case, you will see errors after creation, and you won’t see your editions after you save them.</p>

<h2 id="deletion">Deletion</h2>

<p>There is not much to configure in a deletion view. To add removal abilities to a <code class="highlighter-rouge">Resource</code>, simply use the bundled <code class="highlighter-rouge">&lt;Delete&gt;</code> component from admin-on-rest using the <code class="highlighter-rouge">remove</code> attribute (‘delete’ is a reserved word in JavaScript):</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/App.js</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Delete</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'admin-on-rest/lib/mui'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Admin</span> <span class="nx">restClient</span><span class="o">=</span><span class="p">{</span><span class="nx">jsonServerRestClient</span><span class="p">(</span><span class="s1">'http://jsonplaceholder.typicode.com'</span><span class="p">)}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Resource</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"posts"</span> <span class="nx">list</span><span class="o">=</span><span class="p">{</span><span class="nx">PostList</span><span class="p">}</span> <span class="nx">edit</span><span class="o">=</span><span class="p">{</span><span class="nx">PostEdit</span><span class="p">}</span> <span class="nx">create</span><span class="o">=</span><span class="p">{</span><span class="nx">PostCreate</span><span class="p">}</span> <span class="nx">remove</span><span class="o">=</span><span class="p">{</span><span class="nx">Delete</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="c1">// ...</span>
    <span class="o">&lt;</span><span class="sr">/Admin</span><span class="err">&gt;
</span><span class="p">);</span>
</code></pre>
</div>

<p>In the edition view, a new “delete” button appears. And you can also use the <code class="highlighter-rouge">&lt;DeleteButton&gt;</code> as a field in the list.</p>

<p><img src="./img/post-deletion.png" alt="post deletion view" /></p>

<h2 id="filters">Filters</h2>

<p>Let’s get back to the post list for a minute. It offers sorting and pagination, but one feature is missing: the ability to search content.</p>

<p>Admin-on-rest can use input components to create a multi-criteria search engine in the list view. First, create a <code class="highlighter-rouge">&lt;Filter&gt;</code> component just like you would with a <code class="highlighter-rouge">&lt;Create&gt;</code> component, using input components. Then, tell the list to use a filter element using the <code class="highlighter-rouge">filters</code> prop:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Filter</span><span class="p">,</span> <span class="nx">ReferenceInput</span><span class="p">,</span> <span class="nx">SelectInput</span><span class="p">,</span> <span class="nx">TextInput</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'admin-on-rest/lib/mui'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">PostFilter</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Filter</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">TextInput</span> <span class="nx">label</span><span class="o">=</span><span class="s2">"Search"</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"q"</span> <span class="nx">alwaysOn</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">ReferenceInput</span> <span class="nx">label</span><span class="o">=</span><span class="s2">"User"</span> <span class="nx">source</span><span class="o">=</span><span class="s2">"userId"</span> <span class="nx">reference</span><span class="o">=</span><span class="s2">"users"</span> <span class="nx">allowEmpty</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">SelectInput</span> <span class="nx">optionText</span><span class="o">=</span><span class="s2">"name"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/ReferenceInput</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Filter</span><span class="err">&gt;
</span><span class="p">);</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">List</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span> <span class="nx">filters</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">PostFilter</span> <span class="o">/&gt;</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="c1">// ...</span>
    <span class="o">&lt;</span><span class="sr">/List</span><span class="err">&gt;
</span><span class="p">);</span>
</code></pre>
</div>

<p>The first filter, ‘q’, takes advantage of a full-text functionality offered by JSONPlaceholder. It is <code class="highlighter-rouge">alwaysOn</code>, so it always appears on the screen. The second filter, ‘userId’, can be added by the “add filter” button on the top of the list. As it’s a <code class="highlighter-rouge">&lt;ReferenceInput&gt;</code>, it’s already populated with possible users. It can be turned off by the end user.</p>

<p>Filters are “search-as-you-type”, meaning that when the user enters new values in the filter form, the list refreshes (via an API request) immediately.</p>

<p><img src="./img/filters.gif" alt="posts search engine" /></p>

<h2 id="customizing-the-menu-icons">Customizing the Menu Icons</h2>

<p>The sidebar menu shows the same icon for both posts and users. Fortunately, customizing the menu icon is just a matter of passing an <code class="highlighter-rouge">icon</code> attribute to each <code class="highlighter-rouge">&lt;Resource&gt;</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/App.js</span>
<span class="kr">import</span> <span class="nx">PostIcon</span> <span class="nx">from</span> <span class="s1">'material-ui/svg-icons/action/book'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">UserIcon</span> <span class="nx">from</span> <span class="s1">'material-ui/svg-icons/social/group'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Admin</span> <span class="nx">restClient</span><span class="o">=</span><span class="p">{</span><span class="nx">jsonServerRestClient</span><span class="p">(</span><span class="s1">'http://jsonplaceholder.typicode.com'</span><span class="p">)}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Resource</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"posts"</span> <span class="nx">list</span><span class="o">=</span><span class="p">{</span><span class="nx">PostList</span><span class="p">}</span> <span class="nx">edit</span><span class="o">=</span><span class="p">{</span><span class="nx">PostEdit</span><span class="p">}</span> <span class="nx">create</span><span class="o">=</span><span class="p">{</span><span class="nx">PostCreate</span><span class="p">}</span> <span class="nx">remove</span><span class="o">=</span><span class="p">{</span><span class="nx">Delete</span><span class="p">}</span> <span class="nx">icon</span><span class="o">=</span><span class="p">{</span><span class="nx">PostIcon</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Resource</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"users"</span> <span class="nx">list</span><span class="o">=</span><span class="p">{</span><span class="nx">UserList</span><span class="p">}</span> <span class="nx">icon</span><span class="o">=</span><span class="p">{</span><span class="nx">UserIcon</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Admin</span><span class="err">&gt;
</span><span class="p">);</span>
</code></pre>
</div>

<p><img src="./img/custom-menu.png" alt="custom menu icons" /></p>

<h2 id="using-a-custom-home-page">Using a Custom Home Page</h2>

<p>By default, admin-on-rest displays the list view of the first resource as home page. If you want to display a custom component instead, pass it in the <code class="highlighter-rouge">dashboard</code> attribute of the <code class="highlighter-rouge">&lt;Admin&gt;</code> component.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/Dashboard.js</span>
<span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Card</span><span class="p">,</span> <span class="nx">CardHeader</span><span class="p">,</span> <span class="nx">CardText</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'material-ui/Card'</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Card</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{</span> <span class="nl">margin</span><span class="p">:</span> <span class="s1">'2em'</span> <span class="p">}}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">CardHeader</span> <span class="nx">title</span><span class="o">=</span><span class="s2">"Welcome to the administration"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">CardText</span><span class="o">&gt;</span><span class="nx">Lorem</span> <span class="nx">ipsum</span> <span class="nx">sic</span> <span class="nx">dolor</span> <span class="nx">amet</span><span class="p">...</span><span class="o">&lt;</span><span class="sr">/CardText</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Card</span><span class="err">&gt;
</span><span class="p">);</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/App.js</span>
<span class="kr">import</span> <span class="nx">Dashboard</span> <span class="nx">from</span> <span class="s1">'./Dashboard'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Admin</span> <span class="nx">dashboard</span><span class="o">=</span><span class="p">{</span><span class="nx">Dashboard</span><span class="p">}</span> <span class="nx">restClient</span><span class="o">=</span><span class="p">{</span><span class="nx">jsonServerRestClient</span><span class="p">(</span><span class="s1">'http://jsonplaceholder.typicode.com'</span><span class="p">)}</span><span class="o">&gt;</span>
        <span class="c1">// ...</span>
    <span class="o">&lt;</span><span class="sr">/Admin</span><span class="err">&gt;
</span><span class="p">);</span>
</code></pre>
</div>

<p><img src="./img/dashboard.png" alt="Custom home page" /></p>

<h2 id="adding-a-login-page">Adding a Login Page</h2>

<p>Most admin apps require authentication, so admin-on-rest can check user credentials before displaying a page, and redirect to a login form when the REST API returns a 403 error code.</p>

<p><em>What</em> those credentials are, and <em>how</em> to get them, are questions that you must answer. Admin-on-rest makes no assumption about your authentication strategy (basic auth, OAuth, custom route, etc), but gives you the hooks to plug your logic at the right place - by calling an <code class="highlighter-rouge">authClient</code> function.</p>

<p>For this tutorial, since there is no public authentication API we can use, we’ll use a fake authentication provider that accepts every login request, and stores the <code class="highlighter-rouge">username</code> in <code class="highlighter-rouge">localStorage</code>. We’ll implement a credentials checker that validates only if <code class="highlighter-rouge">localStorage</code> contains a <code class="highlighter-rouge">username</code> item.</p>

<p>The <code class="highlighter-rouge">authClient</code> is a simple function, which must return a <code class="highlighter-rouge">Promise</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/authClient.js</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">AUTH_LOGIN</span><span class="p">,</span> <span class="nx">AUTH_LOGOUT</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'admin-on-rest'</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">AUTH_LOGIN</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="p">{</span> <span class="nx">username</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">params</span><span class="p">;</span>
        <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">'username'</span><span class="p">,</span> <span class="nx">username</span><span class="p">);</span>
        <span class="c1">// accept all username/password combinations</span>
        <span class="k">return</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">AUTH_LOGOUT</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="s1">'username'</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">AUTH_CHECK</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">'username'</span><span class="p">)</span> <span class="p">?</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">()</span> <span class="p">:</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="s1">'Unkown method'</span><span class="p">);</span>
<span class="p">};</span>
</code></pre>
</div>

<p>As it’s asynchronous, you can easily fetch an authentication server in there.</p>

<p>To enable this authentication strategy, pass the client as the <code class="highlighter-rouge">authClient</code> prop in the <code class="highlighter-rouge">&lt;Admin&gt;</code> component:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/App.js</span>
<span class="kr">import</span> <span class="nx">Dashboard</span> <span class="nx">from</span> <span class="s1">'./Dashboard'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">authClient</span> <span class="nx">from</span> <span class="s1">'./authClient'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Admin</span> <span class="nx">authClient</span><span class="o">=</span><span class="p">{</span><span class="nx">authClient</span><span class="p">}</span> <span class="nx">restClient</span><span class="o">=</span><span class="p">{</span><span class="nx">jsonServerRestClient</span><span class="p">(</span><span class="s1">'http://jsonplaceholder.typicode.com'</span><span class="p">)}</span><span class="o">&gt;</span>
        <span class="c1">// ...</span>
    <span class="o">&lt;</span><span class="sr">/Admin</span><span class="err">&gt;
</span><span class="p">);</span>
</code></pre>
</div>

<p>Once the app reloads, it’s now behind a login form that accepts everyone:</p>

<p><img src="./img/login.gif" alt="Login form" /></p>

<h2 id="using-another-rest-dialect">Using Another REST Dialect</h2>

<p>Here is the elephant in the room of this tutorial. In real world projects, the REST dialect of your API won’t match the JSONPLaceholder dialect. Writing a REST client is probably the first thing you’ll have to do to make admin-on-rest work. Depending on your API, this can require a few hours of additional work.</p>

<p>Admin-on-rest delegates every REST calls to a REST client function. This function must simply return a promise for the result. This gives extreme freedom to map any API dialect, add authentication, use endpoints from several domains, etc.</p>

<p>For instance, let’s imagine you have to use the my.api.url API, which expects the following parameters:</p>

<table>
  <thead>
    <tr>
      <th>Action</th>
      <th>Expected REST request</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Get list</td>
      <td><code class="highlighter-rouge">GET http://my.api.url/posts?sort=['title','ASC']&amp;range=[0, 24]&amp;filter={title:'bar'}</code></td>
    </tr>
    <tr>
      <td>Get one record</td>
      <td><code class="highlighter-rouge">GET http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td>Get several records</td>
      <td><code class="highlighter-rouge">GET http://my.api.url/posts?filter={ids:[123,456,789]}</code></td>
    </tr>
    <tr>
      <td>Update a record</td>
      <td><code class="highlighter-rouge">PUT http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td>Create a record</td>
      <td><code class="highlighter-rouge">POST http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td>Delete a record</td>
      <td><code class="highlighter-rouge">DELETE http://my.api.url/posts/123</code></td>
    </tr>
  </tbody>
</table>

<p>Admin-on-rest defines custom verbs for each of the actions of this list. Just like HTTP verbs (<code class="highlighter-rouge">GET</code>, <code class="highlighter-rouge">POST</code>, etc.), REST verbs qualify a request to a REST server. Admin-on-rest verbs are called <code class="highlighter-rouge">GET_LIST</code>, <code class="highlighter-rouge">GET_ONE</code>, <code class="highlighter-rouge">GET_MANY</code>, <code class="highlighter-rouge">CREATE</code>, <code class="highlighter-rouge">UPDATE</code>, and <code class="highlighter-rouge">DELETE</code>. The REST client will have to map each of these verbs to one (or many) HTTP request(s).</p>

<p>The code for an API client for my.api.url is as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/restClient</span>
<span class="kr">import</span> <span class="p">{</span>
    <span class="nx">GET_LIST</span><span class="p">,</span>
    <span class="nx">GET_ONE</span><span class="p">,</span>
    <span class="nx">GET_MANY</span><span class="p">,</span>
    <span class="nx">GET_MANY_REFERENCE</span><span class="p">,</span>
    <span class="nx">CREATE</span><span class="p">,</span>
    <span class="nx">UPDATE</span><span class="p">,</span>
    <span class="nx">DELETE</span><span class="p">,</span>
    <span class="nx">fetchUtils</span><span class="p">,</span>
<span class="p">}</span> <span class="nx">from</span> <span class="s1">'admin-on-rest'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="s1">'my.api.url'</span><span class="p">;</span>

<span class="cm">/**
 * @param {String} type One of the constants appearing at the top if this file, e.g. 'UPDATE'
 * @param {String} resource Name of the resource to fetch, e.g. 'posts'
 * @param {Object} params The REST request params, depending on the type
 * @returns {Object} { url, options } The HTTP request parameters
 */</span>
<span class="kr">const</span> <span class="nx">convertRESTRequestToHTTP</span> <span class="o">=</span> <span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
    <span class="kr">const</span> <span class="p">{</span> <span class="nx">queryParameters</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">fetchUtils</span><span class="p">;</span>
    <span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">switch</span> <span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nx">GET_LIST</span><span class="err">:</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="p">{</span> <span class="nx">page</span><span class="p">,</span> <span class="nx">perPage</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">pagination</span><span class="p">;</span>
        <span class="kr">const</span> <span class="p">{</span> <span class="nx">field</span><span class="p">,</span> <span class="nx">order</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">sort</span><span class="p">;</span>
        <span class="kr">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">sort</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">([</span><span class="nx">field</span><span class="p">,</span> <span class="nx">order</span><span class="p">]),</span>
            <span class="na">range</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">([(</span><span class="nx">page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">perPage</span><span class="p">,</span> <span class="nx">page</span> <span class="o">*</span> <span class="nx">perPage</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]),</span>
            <span class="na">filter</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">filter</span><span class="p">),</span>
        <span class="p">};</span>
        <span class="nx">url</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">API_URL</span><span class="p">}</span><span class="sr">/${resource}</span><span class="se">?</span><span class="sr">${queryParameters</span><span class="se">(</span><span class="sr">query</span><span class="se">)</span><span class="sr">}`</span><span class="err">;
</span>        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">case</span> <span class="nx">GET_ONE</span><span class="err">:</span>
        <span class="nx">url</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">API_URL</span><span class="p">}</span><span class="sr">/${resource}/</span><span class="nx">$</span><span class="p">{</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="err">`</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nx">GET_MANY</span><span class="err">:</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">filter</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">params</span><span class="p">.</span><span class="nx">ids</span> <span class="p">}),</span>
        <span class="p">};</span>
        <span class="nx">url</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">API_URL</span><span class="p">}</span><span class="sr">/${resource}</span><span class="se">?</span><span class="sr">${queryParameters</span><span class="se">(</span><span class="sr">query</span><span class="se">)</span><span class="sr">}`</span><span class="err">;
</span>        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">case</span> <span class="nx">GET_MANY_REFERENCE</span><span class="err">:</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="p">{</span> <span class="nx">page</span><span class="p">,</span> <span class="nx">perPage</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">pagination</span><span class="p">;</span>
        <span class="kr">const</span> <span class="p">{</span> <span class="nx">field</span><span class="p">,</span> <span class="nx">order</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">sort</span><span class="p">;</span>
        <span class="kr">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">sort</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">([</span><span class="nx">field</span><span class="p">,</span> <span class="nx">order</span><span class="p">]),</span>
            <span class="na">range</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">([(</span><span class="nx">page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">perPage</span><span class="p">,</span> <span class="p">(</span><span class="nx">page</span> <span class="o">*</span> <span class="nx">perPage</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]),</span>
            <span class="na">filter</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="p">...</span><span class="nx">params</span><span class="p">.</span><span class="nx">filter</span><span class="p">,</span> <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">target</span><span class="p">]:</span> <span class="nx">params</span><span class="p">.</span><span class="nx">id</span> <span class="p">}),</span>
        <span class="p">};</span>
        <span class="nx">url</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">API_URL</span><span class="p">}</span><span class="sr">/${resource}</span><span class="se">?</span><span class="sr">${queryParameters</span><span class="se">(</span><span class="sr">query</span><span class="se">)</span><span class="sr">}`</span><span class="err">;
</span>        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">case</span> <span class="nx">UPDATE</span><span class="err">:</span>
        <span class="nx">url</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">API_URL</span><span class="p">}</span><span class="sr">/${resource}/</span><span class="nx">$</span><span class="p">{</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="err">`</span><span class="p">;</span>
        <span class="nx">options</span><span class="p">.</span><span class="nx">method</span> <span class="o">=</span> <span class="s1">'PUT'</span><span class="p">;</span>
        <span class="nx">options</span><span class="p">.</span><span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nx">CREATE</span><span class="err">:</span>
        <span class="nx">url</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">API_URL</span><span class="p">}</span><span class="sr">/${resource}`</span><span class="err">;
</span>        <span class="nx">options</span><span class="p">.</span><span class="nx">method</span> <span class="o">=</span> <span class="s1">'POST'</span><span class="p">;</span>
        <span class="nx">options</span><span class="p">.</span><span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nx">DELETE</span><span class="err">:</span>
        <span class="nx">url</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">API_URL</span><span class="p">}</span><span class="sr">/${resource}/</span><span class="nx">$</span><span class="p">{</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="err">`</span><span class="p">;</span>
        <span class="nx">options</span><span class="p">.</span><span class="nx">method</span> <span class="o">=</span> <span class="s1">'DELETE'</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="nl">default</span><span class="p">:</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="err">`</span><span class="nx">Unsupported</span> <span class="nx">fetch</span> <span class="nx">action</span> <span class="nx">type</span> <span class="nx">$</span><span class="p">{</span><span class="nx">type</span><span class="p">}</span><span class="err">`</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">options</span> <span class="p">};</span>
<span class="p">};</span>

<span class="cm">/**
 * @param {Object} response HTTP response from fetch()
 * @param {String} type One of the constants appearing at the top if this file, e.g. 'UPDATE'
 * @param {String} resource Name of the resource to fetch, e.g. 'posts'
 * @param {Object} params The REST request params, depending on the type
 * @returns {Object} REST response
 */</span>
<span class="kr">const</span> <span class="nx">convertHTTPResponseToREST</span> <span class="o">=</span> <span class="p">(</span><span class="nx">response</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="p">{</span> <span class="nx">headers</span><span class="p">,</span> <span class="nx">json</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
    <span class="k">switch</span> <span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nx">GET_LIST</span><span class="err">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="na">data</span><span class="p">:</span> <span class="nx">json</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">x</span><span class="p">),</span>
            <span class="na">total</span><span class="p">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">headers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'content-range'</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">'/'</span><span class="p">).</span><span class="nx">pop</span><span class="p">(),</span> <span class="mi">10</span><span class="p">),</span>
        <span class="p">};</span>
    <span class="k">case</span> <span class="nx">CREATE</span><span class="err">:</span>
        <span class="k">return</span> <span class="p">{</span> <span class="p">...</span><span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="na">id</span><span class="p">:</span> <span class="nx">json</span><span class="p">.</span><span class="nx">id</span> <span class="p">};</span>
    <span class="nl">default</span><span class="p">:</span>
        <span class="k">return</span> <span class="nx">json</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="cm">/**
 * @param {string} type Request type, e.g GET_LIST
 * @param {string} resource Resource name, e.g. "posts"
 * @param {Object} payload Request parameters. Depends on the request type
 * @returns {Promise} the Promise for a REST response
 */</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="p">{</span> <span class="nx">fetchJson</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">fetchUtils</span><span class="p">;</span>
    <span class="kr">const</span> <span class="p">{</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">options</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">convertRESTRequestToHTTP</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">fetchJson</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">convertHTTPResponseToREST</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">));</span>
<span class="p">};</span>
</code></pre>
</div>

<p>Using this client instead of the previous <code class="highlighter-rouge">jsonServerRestClient</code> is just a matter of switching a function:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// in src/app.js</span>
<span class="kr">import</span> <span class="nx">myApiRestClient</span> <span class="nx">from</span> <span class="s1">'./restClient'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Admin</span> <span class="nx">restClient</span><span class="o">=</span><span class="p">{</span><span class="nx">myApiRestClient</span><span class="p">}</span> <span class="nx">dashboard</span><span class="o">=</span><span class="p">{</span><span class="nx">Dashboard</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="c1">// ...</span>
    <span class="o">&lt;</span><span class="sr">/Admin</span><span class="err">&gt;
</span><span class="p">);</span>
</code></pre>
</div>

<h2 id="conclusion">Conclusion</h2>

<p>Admin-on-rest was build with customization in mind. You can use your custom React components everywhere to display a custom list, or a different edition form for a given resource. If you want to go deeper, continue reading the <a href="http://marmelab.com/admin-on-rest/">admin-on-rest documentation</a>, and read the <a href="http://www.material-ui.com/#/">Material UI components documentation</a>.</p>


                                </section>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
